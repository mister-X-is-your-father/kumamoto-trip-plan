<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÁÜäÊú¨Â≠êÈÄ£„ÇåÊóÖË°å„Çπ„Éù„ÉÉ„Éà„Éû„ÉÉ„Éó</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        #header {
            background-color: #2c3e50;
            color: white;
            padding: 20px;
            text-align: center;
        }

        #header h1 {
            margin: 0;
            font-size: 24px;
        }

        #user-selector {
            background-color: #34495e;
            color: white;
            padding: 15px;
            text-align: center;
        }

        #user-selector label {
            margin: 0 15px;
            cursor: pointer;
            font-size: 16px;
        }

        #user-selector input[type="radio"] {
            margin-right: 5px;
        }

        #map {
            height: 600px;
            width: 100%;
        }

        #info {
            padding: 20px;
            background-color: #f8f9fa;
        }

        .spot-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .spot-card {
            background: white;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .spot-card.excluded {
            opacity: 0.4;
            background-color: #e0e0e0;
        }

        .spot-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .spot-card h3 {
            margin: 0 0 10px 0;
            color: #2c3e50;
            font-size: 18px;
        }

        .spot-card .category {
            display: inline-block;
            background-color: #3498db;
            color: white;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 12px;
            margin-bottom: 8px;
        }

        .spot-card .address {
            color: #7f8c8d;
            font-size: 14px;
            margin: 5px 0;
        }

        .exclude-checkbox {
            margin: 10px 0;
            font-size: 14px;
        }

        .exclude-checkbox input {
            margin-right: 5px;
        }

        .rating-section {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #e0e0e0;
        }

        .rating-item {
            margin: 8px 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .rating-label {
            font-size: 13px;
            font-weight: 600;
            color: #2c3e50;
            min-width: 100px;
        }

        .stars {
            display: flex;
            gap: 2px;
        }

        .star {
            cursor: pointer;
            font-size: 20px;
            color: #ddd;
            transition: color 0.2s;
        }

        .star.filled {
            color: #f39c12;
        }

        .star:hover {
            color: #f39c12;
        }

        .rating-display {
            margin-top: 10px;
            padding: 10px;
            background-color: #f8f9fa;
            border-radius: 5px;
            font-size: 12px;
        }

        .user-rating {
            margin: 5px 0;
        }

        .user-name {
            font-weight: 600;
            color: #3498db;
        }

        .legend {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .legend h3 {
            margin: 0 0 10px 0;
            color: #2c3e50;
        }

        .legend-item {
            display: flex;
            align-items: center;
            margin: 5px 0;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin-right: 10px;
            border: 2px solid #333;
        }

        .goto-map-btn {
            display: inline-block;
            margin-top: 8px;
            padding: 5px 12px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 13px;
            text-decoration: none;
        }

        .goto-map-btn:hover {
            background-color: #2980b9;
        }
    </style>
</head>
<body>
    <div id="header">
        <h1>ÁÜäÊú¨Â≠êÈÄ£„ÇåÊóÖË°å„Çπ„Éù„ÉÉ„Éà„Éû„ÉÉ„Éó</h1>
        <p>„Éû„Éº„Ç´„Éº„Çí„ÇØ„É™„ÉÉ„ÇØ„Åô„Çã„Å®Ë©≥Á¥∞ÊÉÖÂ†±„ÅåË°®Á§∫„Åï„Çå„Åæ„Åô</p>
    </div>

    <div id="user-selector">
        <strong>„É¨„Éº„ÉÜ„Ç£„É≥„Ç∞„É¶„Éº„Ç∂„Éº:</strong>
        <label>
            <input type="radio" name="user" value="matsushita" checked>
            Êùæ‰∏ã
        </label>
        <label>
            <input type="radio" name="user" value="morita">
            Ê£ÆÁî∞
        </label>
    </div>

    <div id="map"></div>

    <div id="info">
        <div class="legend">
            <h3>„Éû„Éº„Ç´„Éº„ÅÆËâ≤</h3>
            <div class="legend-item">
                <div class="legend-color" style="background-color: #e74c3c;"></div>
                <span>„ÉÜ„Éº„Éû„Éë„Éº„ÇØ„ÉªÈÅäÂúíÂú∞</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: #27ae60;"></div>
                <span>ÂãïÁâ©Âúí„ÉªËá™ÁÑ∂‰ΩìÈ®ì„ÉªË¶≥ÂÖâÁâßÂ†¥„ÉªÊ∞¥ÊóèÈ§®</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: #f39c12;"></div>
                <span>ÂÖ¨Âúí„ÉªÈÅäÂÖ∑ÊñΩË®≠„ÉªÈÅì„ÅÆÈßÖ„ÉªÂ∑•Â†¥Ë¶ãÂ≠¶</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: #3498db;"></div>
                <span>„Ç¢„Ç¶„Éà„Éâ„Ç¢„Éª„Ç¢„ÇØ„ÉÜ„Ç£„Éì„ÉÜ„Ç£„Éª„Éâ„É©„Ç§„Éñ„Ç≥„Éº„Çπ</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: #9b59b6;"></div>
                <span>Ê≠¥Âè≤„ÉªÊñáÂåñÊñΩË®≠„ÉªÂçöÁâ©È§®</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: #e67e22;"></div>
                <span>Ê∏©Ê≥âÊñΩË®≠</span>
            </div>
        </div>

        <h2 style="color: #2c3e50; margin-bottom: 15px;">Ë¶≥ÂÖâ„Çπ„Éù„ÉÉ„Éà‰∏ÄË¶ß</h2>
        <div class="spot-list" id="spotList"></div>
    </div>

    <script>
        let map;
        let markers = [];
        let infoWindows = [];
        let currentUser = 'matsushita';

        // Ë¶≥ÂÖâ„Çπ„Éù„ÉÉ„Éà„Éá„Éº„Çø
        const spots = [
            { name: '„Ç∞„É™„Éº„É≥„É©„É≥„Éâ', category: '„ÉÜ„Éº„Éû„Éë„Éº„ÇØ„ÉªÈÅäÂúíÂú∞', lat: 32.9864, lng: 130.4347, address: 'ÁÜäÊú¨ÁúåËçíÂ∞æÂ∏ÇÁ∑ë„Ç±‰∏ò', description: 'Ë•øÊó•Êú¨ÊúÄÂ§ßÁ¥ö„ÅÆÈÅäÂúíÂú∞„ÄÇÁ¥Ñ70Á®ÆÈ°û‰ª•‰∏ä„ÅÆ„Ç¢„Éà„É©„ÇØ„Ç∑„Éß„É≥„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ', url: 'https://www.greenland.co.jp/park', color: '#e74c3c' },
            { name: 'ÈòøËòá„Éï„Ç°„Éº„É†„É©„É≥„Éâ', category: '„ÉÜ„Éº„Éû„Éë„Éº„ÇØ„ÉªÈÅäÂúíÂú∞', lat: 32.8494, lng: 131.0536, address: 'ÁÜäÊú¨ÁúåÈòøËòáÈÉ°ÂçóÈòøËòáÊùëÊ≤≥ÈôΩ5579-3', description: 'ÂÅ•Â∫∑„Çí„ÉÜ„Éº„Éû„Å´„Åó„Åü‰ΩìÈ®ìÂûã„ÉÜ„Éº„Éû„Éë„Éº„ÇØ„ÄÇÂÖ•ÂúíÁÑ°Êñô„ÅßÂãïÁâ©„Å®„ÅÆ„Åµ„Çå„ÅÇ„ÅÑ„ÇÇÊ•Ω„Åó„ÇÅ„Åæ„Åô„ÄÇ', url: 'https://asofarmland.co.jp/', color: '#e74c3c' },
            { name: 'ÁÜäÊú¨Â∏ÇÂãïÊ§çÁâ©Âúí', category: 'ÂãïÁâ©Âúí„ÉªËá™ÁÑ∂‰ΩìÈ®ì', lat: 32.7527, lng: 130.7614, address: 'ÁÜäÊú¨ÁúåÁÜäÊú¨Â∏ÇÊù±Âå∫ÂÅ•Ëªç5-14-2', description: 'Á¥Ñ120Á®Æ700È†≠„ÅÆÂãïÁâ©„Å®800Á®Æ50,000ÁÇπ„ÅÆÊ§çÁâ©„ÄÇ„Ç≠„É≥„Ç∑„Ç≥„Ç¶„ÇíÊó•Êú¨„ÅßÂîØ‰∏ÄË¶ã„Çâ„Çå„Åæ„Åô„ÄÇ', url: 'https://www.ezooko.jp/', color: '#27ae60' },
            { name: '„Å≤„Åî„Å£„Åì„Ç∏„É£„É≥„Ç∞„É´ÔºàÂù™‰∫ïÂ∑ùÁ∑ëÂú∞Ôºâ', category: 'ÂÖ¨Âúí„ÉªÈÅäÂÖ∑ÊñΩË®≠', lat: 32.8278, lng: 130.6833, address: 'ÁÜäÊú¨ÁúåÁÜäÊú¨Â∏ÇÂåóÂå∫Ê∏ÖÊ∞¥Áî∫Âù™‰∫ïÂ∑ùÁ∑ëÂú∞ÂÜÖ', description: 'ÁÜäÊú¨Â∏ÇÂÜÖÊúÄÂ§ßÁ¥ö„ÅÆÂ§ßÂûãË§áÂêàÈÅäÂÖ∑ÊñΩË®≠„ÄÇ150Á®ÆÈ°û‰ª•‰∏ä„ÅÆÈÅäÂÖ∑„Åå„ÅÇ„Çä„ÄÅÁÑ°Êñô„ÅßÊ•Ω„Åó„ÇÅ„Åæ„Åô„ÄÇ', url: 'https://www.city.kumamoto.jp/kiji00332062/', color: '#f39c12' },
            { name: 'ÈòøËòá„Éç„Ç§„ÉÅ„É£„Éº„É©„É≥„Éâ', category: '„Ç¢„Ç¶„Éà„Éâ„Ç¢„Éª„Ç¢„ÇØ„ÉÜ„Ç£„Éì„ÉÜ„Ç£', lat: 32.8856, lng: 131.1097, address: 'ÁÜäÊú¨ÁúåÈòøËòáÂ∏ÇÂÜÖÁâß1092-1', description: '„Éë„É©„Ç∞„É©„Ç§„ÉÄ„Éº„ÄÅÁÜ±Ê∞óÁêÉ„ÄÅ„Éû„Ç¶„É≥„ÉÜ„É≥„Éú„Éº„Éâ„Å™„Å©„ÅÆ„Ç¢„Ç¶„Éà„Éâ„Ç¢‰ΩìÈ®ì„Åå„Åß„Åç„Åæ„Åô„ÄÇ', url: 'https://asonatureland.com/', color: '#3498db' },
            { name: 'ÁÜäÊú¨Âüé', category: 'Ê≠¥Âè≤„ÉªÊñáÂåñÊñΩË®≠', lat: 32.8064, lng: 130.7056, address: 'ÁÜäÊú¨ÁúåÁÜäÊú¨Â∏Ç‰∏≠Â§ÆÂå∫Êú¨‰∏∏1-1', description: 'Êó•Êú¨‰∏âÂêçÂüé„ÅÆ‰∏Ä„Å§„ÄÇ„Éô„Éì„Éº„Ç´„Éº„Åß„ÅÆÂÖ•Âúí„ÇÇÂèØËÉΩ„Åß„Åô„ÄÇ', url: 'https://castle.kumamoto-guide.jp/', color: '#9b59b6' },
            { name: 'ONE PIECE „É´„Éï„Ç£ÂÉèÔºàÁÜäÊú¨ÁúåÂ∫ÅÔºâ', category: 'Ê≠¥Âè≤„ÉªÊñáÂåñÊñΩË®≠', lat: 32.7897, lng: 130.7417, address: 'ÁÜäÊú¨ÁúåÁÜäÊú¨Â∏Ç‰∏≠Â§ÆÂå∫Ê∞¥ÂâçÂØ∫6-18-1', description: 'ÁÜäÊú¨Âæ©Ëàà„Éó„É≠„Ç∏„Çß„ÇØ„Éà„Å®„Åó„Å¶Ë®≠ÁΩÆ„Åï„Çå„ÅüÈ∫¶„Çè„Çâ„ÅÆ‰∏ÄÂë≥„ÅÆÂÉè„ÄÇÁúåÂÜÖ9Â∏ÇÁî∫Êùë„Å´10‰ΩìË®≠ÁΩÆ„ÄÇ', url: 'https://op-kumamoto.com/', color: '#9b59b6' },
            { name: 'ÈªíÂ∑ùÊ∏©Ê≥â', category: 'Ê∏©Ê≥âÊñΩË®≠', lat: 33.0347, lng: 131.1169, address: 'ÁÜäÊú¨ÁúåÈòøËòáÈÉ°ÂçóÂ∞èÂõΩÁî∫ÈªíÂ∑ùÊ∏©Ê≥â', description: 'ÂÜ¨„ÅÆÂ§ú„Å´Èû†ÁÅØÁØ≠„Å®Á≠íÁÅØÁØ≠„Åß„É©„Ç§„Éà„Ç¢„ÉÉ„Éó„Åï„Çå„ÇãÂπªÊÉ≥ÁöÑ„Å™Ê∏©Ê≥âË°ó„ÄÇ', url: 'https://www.kurokawaonsen.or.jp/', color: '#e67e22' },
            { name: 'È´òÊ£ÆÁî∞Ê•Ω‰øùÂ≠ò‰ºö', category: 'È£≤È£ü„ÉªÊñáÂåñÊñΩË®≠', lat: 32.8228, lng: 131.1294, address: 'ÁÜäÊú¨ÁúåÈòøËòáÈÉ°È´òÊ£ÆÁî∫Â§ßÂ≠ó‰∏äËâ≤Ë¶ã2639', description: 'ËåÖËë∫„ÅçÂ±ãÊ†π„ÅÆÂè§Ê∞ëÂÆ∂„ÅßÂõ≤ÁÇâË£è„ÇíÂõ≤„Åø„Å™„Åå„Çâ‰ºùÁµ±ÁöÑ„Å™Áî∞Ê•Ω„ÇíÂë≥„Çè„Åà„Åæ„Åô„ÄÇ', url: 'https://dengaku-hozonkai.com/', color: '#9b59b6' },
            { name: 'Â¥éÊ¥•Êïô‰ºö', category: 'Ê≠¥Âè≤„ÉªÊñáÂåñÊñΩË®≠', lat: 32.2917, lng: 130.0142, address: 'ÁÜäÊú¨ÁúåÂ§©ËçâÂ∏ÇÊ≤≥Êµ¶Áî∫Â¥éÊ¥•539', description: '‰∏ñÁïåÈÅ∫Áî£„ÄåÊΩú‰ºè„Ç≠„É™„Ç∑„Çø„É≥Èñ¢ÈÄ£ÈÅ∫Áî£„Äç„ÅÆÊßãÊàêË≥áÁî£„ÄÇÊµ∑„ÅÆÂ§©‰∏ªÂ†Ç„Å®„ÇÇÂëº„Å∞„Çå„Åæ„Åô„ÄÇ', url: 'https://kumamoto.guide/spots/detail/917', color: '#9b59b6' },
            { name: 'Âæ°ËàπÁî∫ÊÅêÁ´úÂçöÁâ©È§®', category: 'ÂçöÁâ©È§®', lat: 32.7086, lng: 130.8061, address: 'ÁÜäÊú¨Áúå‰∏äÁõäÂüéÈÉ°Âæ°ËàπÁî∫Â§ßÂ≠óÂæ°Ëàπ995-6', description: 'Êó•Êú¨„ÅßÊúÄÂàù„Å´ËÇâÈ£üÊÅêÁ´ú„ÅÆÂåñÁü≥„ÅåÁô∫Ë¶ã„Åï„Çå„ÅüÂæ°ËàπÁî∫„ÅÆÊÅêÁ´úÂ∞ÇÈñÄÂçöÁâ©È§®„ÄÇ', url: 'https://mifunemuseum.jp/', color: '#9b59b6' },
            { name: 'ËçâÂçÉÈáå„É∂Êµú', category: 'Ëá™ÁÑ∂ÊôØË¶≥', lat: 32.8842, lng: 131.0236, address: 'ÁÜäÊú¨ÁúåÈòøËòáÂ∏ÇÊ∞∏Ëçâ2391-15', description: 'ÈòøËòá‰∫îÂ≤≥„Çí‰∏ÄÊúõ„Åß„Åç„ÇãÂ∫ÉÂ§ß„Å™ËçâÂéü„ÄÇÊîæÁâß„Åï„Çå„ÅüÈ¶¨„ÅåËçâ„ÇíÈ£ü„ÇÄÁâßÊ≠åÁöÑ„Å™È¢®ÊôØ„ÄÇ', url: 'https://www.newkusasenri.com/', color: '#27ae60' },
            { name: 'ÈòøËòá„Éü„É´„ÇØÁâßÂ†¥', category: 'Ë¶≥ÂÖâÁâßÂ†¥', lat: 32.8317, lng: 130.9486, address: 'ÁÜäÊú¨ÁúåÈòøËòáÈÉ°Ë•øÂéüÊùëÊ≤≥Âéü3944-1', description: 'ÂãïÁâ©„Å®„ÅÆ„Åµ„Çå„ÅÇ„ÅÑ„ÇÑÊâã‰Ωú„Çä‰ΩìÈ®ì„ÅåÊ•Ω„Åó„ÇÅ„ÇãË¶≥ÂÖâÁâßÂ†¥„ÄÇÊñ∞ÈÆÆ„Å™Áâõ‰π≥„Å®„ÇΩ„Éï„Éà„ÇØ„É™„Éº„É†„Åå‰∫∫Ê∞ó„ÄÇ', url: 'https://aso-milk.jp/', color: '#27ae60' },
            { name: '„Éü„É´„ÇØ„É≠„Éº„ÉâÔºàÂ§ßË¶≥Â≥∞Ôºâ', category: '„Éâ„É©„Ç§„Éñ„Ç≥„Éº„Çπ', lat: 32.9544, lng: 131.0894, address: 'ÁÜäÊú¨ÁúåÈòøËòáÂ∏Ç', description: 'ÈòøËòáÂ§ñËº™Â±±„ÅÆÂåóÂÅ¥„ÇíËµ∞„ÇãÂÖ®Èï∑Á¥Ñ45km„ÅÆÁµ∂ÊôØ„Éâ„É©„Ç§„Éñ„É´„Éº„Éà„ÄÇ', url: 'https://jafmate.jp/drive/driveroute_20231106.html', color: '#3498db' },
            { name: 'Â§©ËçâÂ∏ÇÁ´ãÂæ°ÊâÄÊµ¶ÊÅêÁ´ú„ÅÆÂ≥∂ÂçöÁâ©È§®', category: 'ÂçöÁâ©È§®', lat: 32.2797, lng: 130.4139, address: 'ÁÜäÊú¨ÁúåÂ§©ËçâÂ∏ÇÂæ°ÊâÄÊµ¶Áî∫Âæ°ÊâÄÊµ¶4310-5', description: 'ÂåñÁü≥„ÅÆÂ≥∂„ÉªÂæ°ÊâÄÊµ¶„ÅÆÊÅêÁ´úÂ∞ÇÈñÄÂçöÁâ©È§®„ÄÇÂåñÁü≥Êé°ÈõÜ‰ΩìÈ®ì„ÇÇ„Åß„Åç„Åæ„Åô„ÄÇ', url: 'https://goshouramuseum.jp/', color: '#9b59b6' },
            { name: 'Êµ∑‰∏≠Ê∞¥ÊóèÈ§®„Ç∑„Éº„Éâ„Éº„Éä„ÉÑ', category: 'Ê∞¥ÊóèÈ§®', lat: 32.4506, lng: 130.4339, address: 'ÁÜäÊú¨Áúå‰∏äÂ§©ËçâÂ∏ÇÊùæÂ≥∂Áî∫ÂêàÊ¥•6225-8', description: 'Ë•øÊó•Êú¨„ÅßÂîØ‰∏Ä„ÅÆÊµ∑„Å´ÊµÆ„Åã„Å∂„Éâ„Éº„Éä„ÉÑÂûãÊ∞¥ÊóèÈ§®„ÄÇ„Ç§„É´„Ç´„Å®„ÅÆ„Åµ„Çå„ÅÇ„ÅÑ‰ΩìÈ®ì„ÇÇ‰∫∫Ê∞ó„ÄÇ', url: 'https://amakusapearl.com/', color: '#27ae60' },
            { name: 'ÈÅì„ÅÆÈßÖ ÊúâÊòé„É™„ÉÉ„Éó„É´„É©„É≥„Éâ', category: 'ÈÅì„ÅÆÈßÖ', lat: 32.6697, lng: 130.1531, address: 'ÁÜäÊú¨ÁúåÂ§©ËçâÂ∏ÇÊúâÊòéÁî∫‰∏äÊ¥•Êµ¶1955', description: 'ÊúâÊòéÊµ∑„Å´Èù¢„Åó„ÅüÈÅì„ÅÆÈßÖ„ÄÇÂ≥∂ÂéüÂçäÂ≥∂„ÇÑÈõ≤‰ªôÊôÆË≥¢Â≤≥„Çí‰∏ÄÊúõ„Åß„Åç„ÇãÁµ∂ÊôØ„Çπ„Éù„ÉÉ„Éà„ÄÇ', url: 'https://kumamoto.guide/spots/detail/9027', color: '#f39c12' },
            { name: 'Â±±ÈπøÁÅØÁ±†Ê∞ëËä∏È§®', category: 'ÂçöÁâ©È§®', lat: 33.0172, lng: 130.6922, address: 'ÁÜäÊú¨ÁúåÂ±±ÈπøÂ∏ÇÂ±±Èπø1606-2', description: 'ÂíåÁ¥ô„Å®Á≥ä„Å†„Åë„Åß‰Ωú„Çâ„Çå„Çã‰ºùÁµ±Â∑•Ëä∏ÂìÅ„ÄåÂ±±ÈπøÁÅØÁ±†„Äç„ÇíÂ±ïÁ§∫„ÄÇÂõΩ„ÅÆÈáçË¶ÅÊñáÂåñË≤°„ÄÇ', url: 'https://yamaga.site/?page_id=1550', color: '#9b59b6' },
            { name: 'ËÇ•ÂæåÊ∞ëÂÆ∂Êùë', category: 'ÊñáÂåñÊñΩË®≠', lat: 33.0208, lng: 130.6217, address: 'ÁÜäÊú¨ÁúåÁéâÂêçÈÉ°ÂíåÊ∞¥Áî∫Ê±üÁî∞302', description: 'ÁúåÂÜÖÂêÑÂú∞„Åã„ÇâÁßªÁØâÂæ©ÂÖÉ„Åó„ÅüÂè§Ê∞ëÂÆ∂„ÅåÁÇπÂú®„ÄÇÊòî„ÅÆÊó•Êú¨„ÅÆÊöÆ„Çâ„Åó„Çí‰ΩìÈ®ì„Åß„Åç„Åæ„Åô„ÄÇ', url: 'https://kumamoto.guide/spots/detail/12066', color: '#9b59b6' },
            { name: '„Å´„Åó„Åç„Å≤„Åø„Å§Âü∫Âú∞„Éü„É•„Éº„Ç∏„Ç¢„É†', category: 'ÂçöÁâ©È§®', lat: 32.2256, lng: 130.7817, address: 'ÁÜäÊú¨ÁúåÁêÉÁ£®ÈÉ°Èå¶Áî∫Êú®‰∏äË•ø2-107', description: 'Êóß‰∫∫ÂêâÊµ∑ËªçËà™Á©∫Âü∫Âú∞„ÅÆË≥áÊñô„ÇíÂ±ïÁ§∫„ÄÇÂ±±„ÅÆ‰∏≠„Å´‰Ωú„Çâ„Çå„ÅüÊµ∑Ëªç„ÅÆÊñΩË®≠Ë∑°„ÇíË¶ãÂ≠¶„Åß„Åç„Åæ„Åô„ÄÇ', url: 'https://132base.jp/', color: '#9b59b6' },
            { name: 'ÈáúÁî∞ÈÜ∏ÈÄ†ÊâÄ', category: 'Â∑•Â†¥Ë¶ãÂ≠¶', lat: 32.2086, lng: 130.7597, address: 'ÁÜäÊú¨Áúå‰∫∫ÂêâÂ∏ÇÈçõÂÜ∂Â±ãÁî∫45', description: '‰∫∫Âêâ„ÅÆËÄÅËàóÂë≥Âôå„ÉªÈÜ§Ê≤πÈÜ∏ÈÄ†ÊâÄ„ÄÇ‰ºùÁµ±ÁöÑ„Å™Ë£ΩÊ≥ï„ÅÆË£ΩÈÄ†Â∑•Á®ã„ÇíË¶ãÂ≠¶„Åß„Åç„Åæ„Åô„ÄÇ', url: 'http://www.marukama.co.jp/', color: '#f39c12' }
        ];

        // LocalStorage„Åã„Çâ„É¨„Éº„ÉÜ„Ç£„É≥„Ç∞„Éá„Éº„Çø„ÇíË™≠„ÅøËæº„Åø
        function loadRatings() {
            const saved = localStorage.getItem('kumamoto-ratings');
            return saved ? JSON.parse(saved) : {};
        }

        // LocalStorage„Å´„É¨„Éº„ÉÜ„Ç£„É≥„Ç∞„Éá„Éº„Çø„Çí‰øùÂ≠ò
        function saveRatings(ratings) {
            localStorage.setItem('kumamoto-ratings', JSON.stringify(ratings));
        }

        // LocalStorage„Åã„ÇâÈô§Â§ñ„Éá„Éº„Çø„ÇíË™≠„ÅøËæº„Åø
        function loadExclusions() {
            const saved = localStorage.getItem('kumamoto-exclusions');
            return saved ? JSON.parse(saved) : {};
        }

        // LocalStorage„Å´Èô§Â§ñ„Éá„Éº„Çø„Çí‰øùÂ≠ò
        function saveExclusions(exclusions) {
            localStorage.setItem('kumamoto-exclusions', JSON.stringify(exclusions));
        }

        // „É¨„Éº„ÉÜ„Ç£„É≥„Ç∞„ÇíË®≠ÂÆö
        function setRating(spotName, user, criterion, rating) {
            const ratings = loadRatings();
            if (!ratings[spotName]) ratings[spotName] = {};
            if (!ratings[spotName][user]) ratings[spotName][user] = {};
            ratings[spotName][user][criterion] = rating;
            saveRatings(ratings);
            updateRatingDisplay(spotName);
        }

        // „É¨„Éº„ÉÜ„Ç£„É≥„Ç∞„ÇíÂèñÂæó
        function getRating(spotName, user, criterion) {
            const ratings = loadRatings();
            return ratings[spotName]?.[user]?.[criterion] || 0;
        }

        // Êòü„ÅÆË°®Á§∫„ÇíÊõ¥Êñ∞
        function updateStars(container, rating) {
            const stars = container.querySelectorAll('.star');
            stars.forEach((star, index) => {
                if (index < rating) {
                    star.classList.add('filled');
                } else {
                    star.classList.remove('filled');
                }
            });
        }

        // „É¨„Éº„ÉÜ„Ç£„É≥„Ç∞Ë°®Á§∫„ÇíÊõ¥Êñ∞
        function updateRatingDisplay(spotName) {
            const ratings = loadRatings();
            const displayDiv = document.querySelector(`[data-spot="${spotName}"] .rating-display`);
            if (!displayDiv) return;

            const spotRatings = ratings[spotName] || {};
            let html = '<strong>ÁèæÂú®„ÅÆ„É¨„Éº„ÉÜ„Ç£„É≥„Ç∞:</strong><br>';

            ['matsushita', 'morita'].forEach(user => {
                const userName = user === 'matsushita' ? 'Êùæ‰∏ã' : 'Ê£ÆÁî∞';
                const userRatings = spotRatings[user] || {};
                const child = userRatings['child'] || 0;
                const access = userRatings['access'] || 0;
                const unique = userRatings['unique'] || 0;

                if (child || access || unique) {
                    html += `<div class="user-rating">
                        <span class="user-name">${userName}:</span>
                        Â≠ê„Å©„ÇÇ${child}‚òÖ / Ë°å„Åç${access}‚òÖ / „Åì„Åì${unique}‚òÖ
                    </div>`;
                }
            });

            displayDiv.innerHTML = html;
        }

        // Google MapsÂàùÊúüÂåñÈñ¢Êï∞
        function initMap() {
            map = new google.maps.Map(document.getElementById('map'), {
                center: { lat: 32.8, lng: 130.7 },
                zoom: 10,
                mapTypeControl: true,
                streetViewControl: true,
                fullscreenControl: true
            });

            const bounds = new google.maps.LatLngBounds();
            const exclusions = loadExclusions();

            spots.forEach((spot, index) => {
                const position = { lat: spot.lat, lng: spot.lng };
                const isExcluded = exclusions[spot.name] || false;

                const markerIcon = {
                    path: google.maps.SymbolPath.CIRCLE,
                    fillColor: spot.color,
                    fillOpacity: isExcluded ? 0.3 : 1,
                    strokeColor: '#ffffff',
                    strokeWeight: 3,
                    scale: 12
                };

                const marker = new google.maps.Marker({
                    position: position,
                    map: map,
                    title: spot.name,
                    icon: markerIcon,
                    animation: google.maps.Animation.DROP,
                    visible: !isExcluded
                });

                const infoWindowContent = `
                    <div class="info-window">
                        <div class="info-window-title">${spot.name}</div>
                        <div class="info-window-category" style="background-color: ${spot.color};">${spot.category}</div>
                        <div class="info-window-description">${spot.description}</div>
                        <div class="info-window-address">üìç ${spot.address}</div>
                        <a href="${spot.url}" target="_blank" class="info-window-link">ÂÖ¨Âºè„Çµ„Ç§„Éà„ÇíË¶ã„Çã ‚Üí</a>
                    </div>
                `;

                const infoWindow = new google.maps.InfoWindow({
                    content: infoWindowContent
                });

                marker.addListener('click', () => {
                    infoWindows.forEach(iw => iw.close());
                    infoWindow.open(map, marker);
                });

                markers.push(marker);
                infoWindows.push(infoWindow);
                bounds.extend(position);
            });

            map.fitBounds(bounds);
            createSpotCards();
        }

        // „Çπ„Éù„ÉÉ„Éà„Ç´„Éº„Éâ„Çí‰ΩúÊàê
        function createSpotCards() {
            const spotListDiv = document.getElementById('spotList');
            const exclusions = loadExclusions();

            spots.forEach((spot, index) => {
                const isExcluded = exclusions[spot.name] || false;
                const card = document.createElement('div');
                card.className = 'spot-card' + (isExcluded ? ' excluded' : '');
                card.setAttribute('data-spot', spot.name);

                card.innerHTML = `
                    <div class="category" style="background-color: ${spot.color};">${spot.category}</div>
                    <h3>${spot.name}</h3>
                    <p style="font-size: 14px; margin: 10px 0;">${spot.description}</p>
                    <div class="address">üìç ${spot.address}</div>

                    <div class="exclude-checkbox">
                        <label>
                            <input type="checkbox" class="exclude-cb" data-spot="${spot.name}" ${isExcluded ? 'checked' : ''}>
                            Èô§Â§ñ„Åô„Çã
                        </label>
                    </div>

                    <button class="goto-map-btn" data-index="${index}">„Éû„ÉÉ„Éó„ÅßË°®Á§∫</button>

                    <div class="rating-section">
                        <strong>„É¨„Éº„ÉÜ„Ç£„É≥„Ç∞ (ÁèæÂú®: <span class="current-user-name">Êùæ‰∏ã</span>)</strong>
                        <div class="rating-item">
                            <span class="rating-label">Â≠ê„Å©„ÇÇÂñú„Å≥Â∫¶</span>
                            <div class="stars" data-spot="${spot.name}" data-criterion="child">
                                ${[1,2,3,4,5].map(i => `<span class="star" data-rating="${i}">‚òÖ</span>`).join('')}
                            </div>
                        </div>
                        <div class="rating-item">
                            <span class="rating-label">Ë°å„Åç„ÇÑ„Åô„Åï</span>
                            <div class="stars" data-spot="${spot.name}" data-criterion="access">
                                ${[1,2,3,4,5].map(i => `<span class="star" data-rating="${i}">‚òÖ</span>`).join('')}
                            </div>
                        </div>
                        <div class="rating-item">
                            <span class="rating-label">„Åì„Åì„Å™„Çâ„Åß„ÅØ</span>
                            <div class="stars" data-spot="${spot.name}" data-criterion="unique">
                                ${[1,2,3,4,5].map(i => `<span class="star" data-rating="${i}">‚òÖ</span>`).join('')}
                            </div>
                        </div>
                        <div class="rating-display"></div>
                    </div>
                `;

                // Èô§Â§ñ„ÉÅ„Çß„ÉÉ„ÇØ„Éú„ÉÉ„ÇØ„Çπ„ÅÆ„Ç§„Éô„É≥„Éà„É™„Çπ„Éä„Éº
                const excludeCheckbox = card.querySelector('.exclude-cb');
                excludeCheckbox.addEventListener('change', (e) => {
                    const exclusions = loadExclusions();
                    exclusions[spot.name] = e.target.checked;
                    saveExclusions(exclusions);

                    // „Ç´„Éº„Éâ„ÅÆË°®Á§∫„ÇíÊõ¥Êñ∞
                    card.classList.toggle('excluded', e.target.checked);

                    // „Éû„Éº„Ç´„Éº„ÅÆË°®Á§∫„ÇíÊõ¥Êñ∞
                    markers[index].setVisible(!e.target.checked);
                    markers[index].setIcon({
                        path: google.maps.SymbolPath.CIRCLE,
                        fillColor: spot.color,
                        fillOpacity: e.target.checked ? 0.3 : 1,
                        strokeColor: '#ffffff',
                        strokeWeight: 3,
                        scale: 12
                    });
                });

                // „Éû„ÉÉ„ÉóË°®Á§∫„Éú„Çø„É≥
                const gotoBtn = card.querySelector('.goto-map-btn');
                gotoBtn.addEventListener('click', () => {
                    const position = { lat: spot.lat, lng: spot.lng };
                    map.setCenter(position);
                    map.setZoom(14);
                    infoWindows.forEach(iw => iw.close());
                    infoWindows[index].open(map, markers[index]);
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });

                // Êòü„ÅÆ„ÇØ„É™„ÉÉ„ÇØ„Ç§„Éô„É≥„Éà
                card.querySelectorAll('.stars').forEach(starsContainer => {
                    const spotName = starsContainer.dataset.spot;
                    const criterion = starsContainer.dataset.criterion;

                    // ÂàùÊúüË°®Á§∫
                    const currentRating = getRating(spotName, currentUser, criterion);
                    updateStars(starsContainer, currentRating);

                    starsContainer.querySelectorAll('.star').forEach(star => {
                        star.addEventListener('click', () => {
                            const rating = parseInt(star.dataset.rating);
                            setRating(spotName, currentUser, criterion, rating);
                            updateStars(starsContainer, rating);
                        });
                    });
                });

                updateRatingDisplay(spot.name);
                spotListDiv.appendChild(card);
            });
        }

        // „É¶„Éº„Ç∂„ÉºÈÅ∏Êäû„ÅÆÂ§âÊõ¥
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('input[name="user"]').forEach(radio => {
                radio.addEventListener('change', (e) => {
                    currentUser = e.target.value;
                    const userName = currentUser === 'matsushita' ? 'Êùæ‰∏ã' : 'Ê£ÆÁî∞';

                    // ÁèæÂú®„ÅÆ„É¶„Éº„Ç∂„ÉºÂêç„ÇíÊõ¥Êñ∞
                    document.querySelectorAll('.current-user-name').forEach(el => {
                        el.textContent = userName;
                    });

                    // ÂÖ®„Å¶„ÅÆÊòü„ÅÆË°®Á§∫„ÇíÊõ¥Êñ∞
                    document.querySelectorAll('.stars').forEach(starsContainer => {
                        const spotName = starsContainer.dataset.spot;
                        const criterion = starsContainer.dataset.criterion;
                        const rating = getRating(spotName, currentUser, criterion);
                        updateStars(starsContainer, rating);
                    });
                });
            });
        });

        // „Ç®„É©„Éº„Éè„É≥„Éâ„É™„É≥„Ç∞
        window.gm_authFailure = function() {
            console.error('Google Maps API„Ç≠„Éº„ÅåÁÑ°Âäπ„Åß„Åô„ÄÇ');
        };
    </script>

    <!-- Google Maps APIË™≠„ÅøËæº„Åø -->
    <script src="https://maps.googleapis.com/maps/api/js?callback=initMap&language=ja" async defer></script>
</body>
</html>
